# BikeToKey

フィットネスバイクの運動データをキーボード入力に変換する汎用ツール

## 📖 これは何？

BikeToKeyは、BLEフィットネスバイクを漕ぐ速さに応じて、自動的にキーボード入力を行うNode-REDプロジェクトです。

バイクを漕ぐだけで、パソコン上のゲームやアプリケーションを操作できます。キーボード入力を受け付けるあらゆるソフトウェアで使用可能です。

### 特徴

- 🚴 バイクの回転数(RPM)を検出してキー入力に変換
- 🎮 キーボード操作できるアプリなら何でも使える
- 🔧 キー割り当てや速度設定を自由にカスタマイズ可能
- 📡 Bluetooth接続でワイヤレス

## 🎯 使用例

### Minecraft Education Edition（デフォルト設定）

このプロジェクトは、デフォルトでMinecraft Education Edition向けに設定されています。

**動作:**
- 速く漕ぐ (>55rpm): ダッシュ（W + Ctrl キー）
- 普通に漕ぐ (1-55rpm): 前進（W キー）
- 停止 (<1rpm): 停止（キーを離す）

**教育現場での活用:**
- プログラミング学習と運動を組み合わせた授業
- 長時間の画面作業での健康的な運動習慣
- ゲーミフィケーションによる学習意欲向上

**使い方:**
1. バイクの電源をON
2. Minecraftを起動してワールドに入る
3. Node-REDで [開始] ボタンをクリック
4. バイクを漕ぐ

### その他のアプリケーション

Node-REDのフローを編集すれば、他のアプリでも使えます:
- レースゲーム（↑キーでアクセル）
- プレゼンソフト（→キーでスライド送り）
- VRアプリ（Spaceキーでジャンプ）
- その他、キーボード操作できるアプリ全般

## 🛠️ 必要なもの

### ハードウェア
- FTMS対応のBLEフィットネスバイク
- Bluetooth 4.0以上対応のPC

### ソフトウェア
- Node.js (v14以上)
- Node-RED

## 🚀 使い始める

```bash
# Node-REDをインストール
npm install -g node-red

# プロジェクトをクローン
git clone https://github.com/yourusername/bike-to-key.git
cd bike-to-key

# 依存パッケージをインストール
npm install

# Node-REDを起動
node-red
```

ブラウザで `http://localhost:1880` を開き、[開始] ボタンをクリックして使用開始。

## 🔧 カスタマイズ

### キーの変更

Node-REDエディタで「ダッシュ」「前進」「停止」ノードを開き、`robotjs.keyToggle()` の引数を編集:

```javascript
// 例: ↑キーに変更（レースゲーム用）
robotjs.keyToggle('up', 'down');

// 例: Spaceキーに変更（VRアプリ用）
robotjs.keyToggle('space', 'down');
```

### 速度閾値の変更

「回転数で分岐」ノードを開き、数値を変更:
- デフォルト: 55rpm
- 軽めの運動: 40rpm
- 激しい運動: 70rpm

## 🐛 デバッグ

- [停止] ボタン: データフローを一時停止
- [再開] ボタン: データフローを再開

## 📚 技術情報

- **FTMS (Fitness Machine Service)**: Bluetooth標準プロトコル（UUID: 1826）
- **Indoor Bike Data**: 回転数などのデータ取得（UUID: 2ad2）
- **RobotJS**: キーボード入力シミュレーション

取得できるデータ: 速度、回転数、距離、パワー、消費カロリー、経過時間

## 🎓 教育での活用

- 健康教育: デジタル使用時の運動習慣
- 体育×ICT: 体を動かしながら学ぶ
- STEM教育: センサー、プログラミング、運動の連携
- データサイエンス: 運動データの可視化・分析

## 📄 ライセンス

MIT License

## 👤 作者

mming
