[
    {
        "id": "5cf9b3d9818214c9",
        "type": "tab",
        "label": "ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ãƒã‚¤ã‚¯ã§ãƒã‚¤ã‚¯ãƒ©",
        "disabled": false,
        "info": "# ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ãƒã‚¤ã‚¯ã§ãƒã‚¤ã‚¯ãƒ©\n\nBLEãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ãƒã‚¤ã‚¯ã®å›è»¢æ•°(cadence)ã§Minecraft Education Editionã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’æ“ä½œã—ã¾ã™ã€‚\n\n## ä½¿ã„æ–¹\n\n1. ãƒã‚¤ã‚¯ã®é›»æºã‚’ON\n2. Minecraftã‚’èµ·å‹•ã—ã¦ãƒ¯ãƒ¼ãƒ«ãƒ‰ã«å…¥ã‚‹\n3. [é–‹å§‹]ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯\n4. ãƒã‚¤ã‚¯ã‚’æ¼•ã\n\n### ä¸€æ™‚åœæ­¢/å†é–‹\n\n- **ä¸€æ™‚åœæ­¢**: [ä¸€æ™‚åœæ­¢]ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯\n  - BLEæ¥ç¶šã¯ç¶­æŒï¼ˆå†æ¥ç¶šä¸è¦ï¼‰\n  - ã‚­ãƒ¼ã¯è‡ªå‹•çš„ã«é›¢ã‚Œã‚‹\n- **å†é–‹**: [å†é–‹]ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯\n  - ã™ãã«å†é–‹ã§ãã‚‹\n\n## é€Ÿåº¦åˆ¶å¾¡\n\n| cadence (rpm) | Minecraftæ“ä½œ | ã‚­ãƒ¼ |\n|---|---|---|\n| > 55 | ãƒ€ãƒƒã‚·ãƒ¥ | W + Control |\n| 1 ~ 55 | é€šå¸¸å‰é€² | W |\n| < 1 | åœæ­¢ | (ã‚­ãƒ¼ã‚’é›¢ã™) |\n\n## åœæ­¢è£…ç½®ï¼ˆ3ç¨®é¡ï¼‰\n\n### 1. è‡ªå‹•åœæ­¢ï¼ˆcadenceæ¤œçŸ¥ï¼‰\n- **æ¡ä»¶**: cadence < 1 rpm\n- **å‹•ä½œ**: Wã‚­ãƒ¼ã€Controlã‚­ãƒ¼ã‚’è‡ªå‹•çš„ã«é›¢ã™\n- **ç›®çš„**: æ¼•ãã®ã‚’æ­¢ã‚ãŸã‚‰è‡ªå‹•çš„ã«åœæ­¢\n\n### 2. ç·Šæ€¥åœæ­¢ãƒœã‚¿ãƒ³\n- **æ¡ä»¶**: ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯\n- **å‹•ä½œ**: å…¨ã¦ã®ã‚­ãƒ¼ã‚’å¼·åˆ¶çš„ã«é›¢ã™\n- **ç›®çš„**: ã‚­ãƒ¼ãŒæŠ¼ã—ã£ã±ãªã—ã«ãªã£ãŸæ™‚ã«æ‰‹å‹•ã§ãƒªã‚»ãƒƒãƒˆ\n\n### 3. ä¸€æ™‚åœæ­¢ãƒœã‚¿ãƒ³\n- **æ¡ä»¶**: ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯\n- **å‹•ä½œ**: å…¨ã¦ã®ã‚­ãƒ¼ã‚’é›¢ã—ã¦ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã‚’åœæ­¢\n- **ç›®çš„**: ä¼‘æ†©æ™‚ã«ä¸€æ™‚çš„ã«åœæ­¢ï¼ˆBLEæ¥ç¶šã¯ç¶­æŒï¼‰\n\n### çµ‚äº†æ™‚ã®å®‰å…¨è£…ç½®\n- **æ¡ä»¶**: Node-REDçµ‚äº†æ™‚\n- **å‹•ä½œ**: åˆæœŸåŒ–ãƒ»çµ‚äº†å‡¦ç†ãƒãƒ¼ãƒ‰ã§è‡ªå‹•å®Ÿè¡Œ\n- **ç›®çš„**: Node-REDã‚’é–‰ã˜ãŸæ™‚ã‚‚ç¢ºå®Ÿã«ã‚­ãƒ¼ã‚’é›¢ã™\n\n## Bluetoothä»•æ§˜\n\n### Service UUID: 1826 (FTMS)\n- **æ­£å¼åç§°**: Fitness Machine Service\n- **è¦æ ¼**: Bluetooth SIGæ¨™æº–ã‚µãƒ¼ãƒ“ã‚¹\n- **ä»•æ§˜æ›¸**: https://www.bluetooth.com/specifications/specs/fitness-machine-service-1-0/\n- **èª¬æ˜**: ãƒ•ã‚£ãƒƒãƒˆãƒã‚¹ãƒã‚·ãƒ³ï¼ˆãƒˆãƒ¬ãƒƒãƒ‰ãƒŸãƒ«ã€ãƒã‚¤ã‚¯ç­‰ï¼‰ç”¨ã®æ¨™æº–BLEã‚µãƒ¼ãƒ“ã‚¹\n- **å€‹ä½“ä¾å­˜**: ãªã—ï¼ˆå…¨ã¦ã®FTMSå¯¾å¿œæ©Ÿå™¨ã§å…±é€šï¼‰\n\n### Characteristic UUID: 2ad2 (Indoor Bike Data)\n- **æ­£å¼åç§°**: Indoor Bike Data\n- **ãƒ‡ãƒ¼ã‚¿å½¢å¼**: 18ãƒã‚¤ãƒˆï¼ˆãƒªãƒˆãƒ«ã‚¨ãƒ³ãƒ‡ã‚£ã‚¢ãƒ³ï¼‰\n- **æ›´æ–°é »åº¦**: ç´„1ç§’ã”ã¨\n- **å«ã¾ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿**: speed, cadence, distance, power, energy, time\n- **ä»•æ§˜æ›¸**: https://www.bluetooth.com/specifications/specs/gatt-specification-supplement/\n\n## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°\n\n### ãƒã‚¤ã‚¯ã«æ¥ç¶šã§ããªã„\n- ãƒã‚¤ã‚¯ã®é›»æºãŒå…¥ã£ã¦ã„ã‚‹ã‹ç¢ºèª\n- BluetoothãŒã‚ªãƒ³ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª\n- ä»–ã®ã‚¢ãƒ—ãƒªãŒãƒã‚¤ã‚¯ã«æ¥ç¶šã—ã¦ã„ãªã„ã‹ç¢ºèª\n\n### ã‚­ãƒ¼ãŒæŠ¼ã—ã£ã±ãªã—ã«ãªã£ãŸ\n- [ç·Šæ€¥åœæ­¢]ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯\n- Node-REDã‚’å†èµ·å‹•\n\n## å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸\n\n- node-red-contrib-noble-bluetooth\n- robotjs",
        "env": []
    },
    {
        "id": "7048fdae896e0275",
        "type": "websocket-listener",
        "path": "/ws",
        "wholemsg": "true"
    },
    {
        "id": "init_finalize_node",
        "type": "function",
        "z": "5cf9b3d9818214c9",
        "name": "åˆæœŸåŒ–ãƒ»çµ‚äº†å‡¦ç†",
        "func": "/**\n * åˆæœŸåŒ–ãƒ»çµ‚äº†å‡¦ç†ãƒãƒ¼ãƒ‰\n * \n * ã“ã®ãƒãƒ¼ãƒ‰ã¯å®Ÿéš›ã«ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡¦ç†ã—ãªã„\n * åˆæœŸåŒ–ã‚¿ãƒ–ã¨çµ‚äº†æ™‚ã‚¿ãƒ–ã§é‡è¦ãªå‡¦ç†ã‚’è¡Œã†\n */\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "/**\n * åˆæœŸåŒ–å‡¦ç†\n * \n * Node-REDèµ·å‹•æ™‚ã«è‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹\n * flowå¤‰æ•°ã‚’åˆæœŸçŠ¶æ…‹ã«ãƒªã‚»ãƒƒãƒˆ\n */\n\n// ä¸€æ™‚åœæ­¢çŠ¶æ…‹ã‚’è§£é™¤\nflow.set('paused', false);\n\n// ãƒ­ã‚°å‡ºåŠ›\nnode.warn('âœ… åˆæœŸåŒ–å®Œäº†: ä¸€æ™‚åœæ­¢çŠ¶æ…‹ã‚’è§£é™¤ã—ã¾ã—ãŸ');",
        "finalize": "/**\n * çµ‚äº†æ™‚å‡¦ç†\n * \n * Node-REDçµ‚äº†æ™‚ã«è‡ªå‹•å®Ÿè¡Œã•ã‚Œã‚‹\n * å…¨ã¦ã®ã‚­ãƒ¼ã‚’é›¢ã—ã¦å®‰å…¨ãªçŠ¶æ…‹ã«ã™ã‚‹\n * \n * â˜…ã“ã“ã ã‘ã§å®Ÿè£…ï¼ˆä»–ã®ãƒãƒ¼ãƒ‰ã«ã¯ä¸è¦ï¼‰â˜…\n */\n\n// Wã‚­ãƒ¼ã‚’é›¢ã™\nrobotjs.keyToggle('w', 'up');\n\n// Controlã‚­ãƒ¼ã‚’é›¢ã™\nrobotjs.keyToggle('control', 'up');\n\n// ãƒ­ã‚°å‡ºåŠ›\nnode.warn('ğŸ›‘ çµ‚äº†æ™‚ã‚­ãƒ¼ãƒªã‚»ãƒƒãƒˆå®Œäº†');",
        "libs": [
            {
                "var": "robotjs",
                "module": "robotjs"
            }
        ],
        "x": 180,
        "y": 60,
        "wires": [
            []
        ]
    },
    {
        "id": "1cdf1482a9aae136",
        "type": "inject",
        "z": "5cf9b3d9818214c9",
        "name": "é–‹å§‹",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 150,
        "y": 140,
        "wires": [
            [
                "ed01f862488b4593"
            ]
        ]
    },
    {
        "id": "ed01f862488b4593",
        "type": "BLE scanner",
        "z": "5cf9b3d9818214c9",
        "name": "FTMSãƒã‚¤ã‚¯ã‚’ã‚¹ã‚­ãƒ£ãƒ³ (UUID:1826)",
        "services": "1826",
        "servicesType": "str",
        "continuous": false,
        "x": 300,
        "y": 140,
        "wires": [
            [
                "28481cc038050467"
            ]
        ]
    },
    {
        "id": "28481cc038050467",
        "type": "BLE device",
        "z": "5cf9b3d9818214c9",
        "name": "ãƒã‚¤ã‚¯ã«æ¥ç¶š",
        "x": 180,
        "y": 220,
        "wires": [
            [
                "26df239b799ebcbc"
            ]
        ]
    },
    {
        "id": "26df239b799ebcbc",
        "type": "BLE in",
        "z": "5cf9b3d9818214c9",
        "topic": "subscribe",
        "characteristic": "2ad2",
        "name": "ãƒã‚¤ã‚¯ãƒ‡ãƒ¼ã‚¿å—ä¿¡ (UUID:2ad2)",
        "x": 370,
        "y": 220,
        "wires": [
            [
                "pause_gate_node"
            ]
        ]
    },
    {
        "id": "pause_gate_node",
        "type": "function",
        "z": "5cf9b3d9818214c9",
        "name": "ä¸€æ™‚åœæ­¢ã‚²ãƒ¼ãƒˆ",
        "func": "/**\n * ä¸€æ™‚åœæ­¢ã‚²ãƒ¼ãƒˆ\n * \n * ã€æ©Ÿèƒ½ã€‘\n * flowå¤‰æ•° 'paused' ã®çŠ¶æ…‹ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®é€šéã‚’åˆ¶å¾¡\n * - paused = true:  ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç ´æ£„ï¼ˆä¸€æ™‚åœæ­¢ä¸­ï¼‰\n * - paused = false: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€šã™ï¼ˆé€šå¸¸å‹•ä½œï¼‰\n * \n * ã€ãƒ¡ãƒªãƒƒãƒˆã€‘\n * - BLEæ¥ç¶šã¯ç¶­æŒã•ã‚Œã‚‹ï¼ˆå†æ¥ç¶šä¸è¦ï¼‰\n * - ä¸€æ™‚åœæ­¢ä¸­ã¯ã‚­ãƒ¼ãŒé›¢ã‚Œã‚‹ï¼ˆå®‰å…¨ï¼‰\n * - å†é–‹ãŒé€Ÿã„\n */\n\n// flowå¤‰æ•°ã‹ã‚‰ä¸€æ™‚åœæ­¢çŠ¶æ…‹ã‚’å–å¾—\nconst paused = flow.get('paused') || false;\n\n// ä¸€æ™‚åœæ­¢ä¸­ã®å ´åˆ\nif (paused) {\n    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºï¼ˆã‚ªãƒ¬ãƒ³ã‚¸è‰²ï¼‰\n    node.status({\n        fill: \"orange\", \n        shape: \"ring\", \n        text: \"ä¸€æ™‚åœæ­¢ä¸­\"\n    });\n    \n    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç ´æ£„ï¼ˆnullã‚’è¿”ã™ï¼‰\n    return null;\n}\n\n// é€šå¸¸å‹•ä½œä¸­ã®å ´åˆ\nnode.status({\n    fill: \"green\", \n    shape: \"dot\", \n    text: \"å‹•ä½œä¸­\"\n});\n\n// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãã®ã¾ã¾é€šã™\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 200,
        "y": 280,
        "wires": [
            [
                "51ddf084c748a96f"
            ]
        ]
    },
    {
        "id": "51ddf084c748a96f",
        "type": "function",
        "z": "5cf9b3d9818214c9",
        "name": "FTMSãƒ‡ãƒ¼ã‚¿è§£æ",
        "func": "/**\n * FTMS Indoor Bike Dataãƒ‘ãƒ¼ã‚µãƒ¼\n * \n * ã€ä»•æ§˜ã€‘\n * - Service UUID: 1826 (Fitness Machine Service)\n * - Characteristic UUID: 2ad2 (Indoor Bike Data)\n * - ä»•æ§˜æ›¸: https://www.bluetooth.com/specifications/specs/fitness-machine-service-1-0/\n * \n * ã€ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€‘\n * - 18ãƒã‚¤ãƒˆã®ãƒã‚¤ãƒŠãƒªãƒ‡ãƒ¼ã‚¿\n * - ãƒªãƒˆãƒ«ã‚¨ãƒ³ãƒ‡ã‚£ã‚¢ãƒ³å½¢å¼\n * - æ›´æ–°é »åº¦: ç´„1ç§’ã”ã¨\n * \n * ã€ãƒã‚¤ãƒˆãƒãƒƒãƒ—ã€‘\n * Byte 0-1:   Flags (0x0000 = å…¨ãƒ‡ãƒ¼ã‚¿æœ‰åŠ¹)\n * Byte 2-3:   Instantaneous Speed (0.01 km/h å˜ä½)\n * Byte 4-5:   Instantaneous Cadence (0.5 rpm å˜ä½) â† Minecraftåˆ¶å¾¡ã«ä½¿ç”¨\n * Byte 6-8:   Total Distance (1 m å˜ä½)\n * Byte 9-10:  Instantaneous Power (1 watt å˜ä½)\n * Byte 11-12: Total Energy (1 kcal å˜ä½)\n * Byte 13-14: Energy Per Hour (1 kcal/hour å˜ä½)\n * Byte 15:    Energy Per Minute (1 kcal/minute å˜ä½)\n * Byte 16-17: Elapsed Time (1 second å˜ä½)\n * \n * ã€æŠ½å‡ºãƒ‡ãƒ¼ã‚¿ã€‘\n * - speed: é€Ÿåº¦ (km/h)\n * - cadence: å›è»¢æ•° (rpm) â† Minecraftã®é€Ÿåº¦åˆ¶å¾¡ã«ä½¿ç”¨\n * - distance: è·é›¢ (m)\n * - power: ãƒ‘ãƒ¯ãƒ¼ (watts)\n * - totalEnergy: ç·æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼ (kcal)\n * - energyPerHour: æ™‚é–“ã‚ãŸã‚Šæ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼ (kcal/hour)\n * - energyPerMinute: åˆ†ã‚ãŸã‚Šæ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼ (kcal/minute)\n * - elapsedTime: çµŒéæ™‚é–“ (seconds)\n */\n\n// ãƒšã‚¤ãƒ­ãƒ¼ãƒ‰ã®å­˜åœ¨ç¢ºèª\nif (msg.payload) {\n    const data = msg.payload;\n    \n    // ãƒ‡ãƒ¼ã‚¿é•·ãƒã‚§ãƒƒã‚¯ï¼ˆæœ€ä½18ãƒã‚¤ãƒˆå¿…è¦ï¼‰\n    if (data.length < 18) {\n        node.error(\"ãƒ‡ãƒ¼ã‚¿ãŒçŸ­ã™ãã¾ã™: \" + data.length + \"ãƒã‚¤ãƒˆ\");\n        return null;\n    }\n    \n    // ãƒªãƒˆãƒ«ã‚¨ãƒ³ãƒ‡ã‚£ã‚¢ãƒ³èª­ã¿å–ã‚Šé–¢æ•°\n    const readUInt16LE = (offset) => data[offset] | (data[offset + 1] << 8);\n    const readUInt24LE = (offset) => data[offset] | (data[offset + 1] << 8) | (data[offset + 2] << 16);\n    \n    // ãƒ‡ãƒ¼ã‚¿è§£æï¼ˆFTMSãƒã‚¤ãƒˆãƒãƒƒãƒ—ã«å¾“ã†ï¼‰\n    const flags = readUInt16LE(0);              // ãƒ•ãƒ©ã‚°ï¼ˆæœªä½¿ç”¨ï¼‰\n    const speed = readUInt16LE(2) * 0.01;       // é€Ÿåº¦ (0.01 km/hå˜ä½)\n    const cadence = readUInt16LE(4) * 0.5;      // å›è»¢æ•° (0.5 rpmå˜ä½)\n    const distance = readUInt24LE(6);           // è·é›¢ (m)\n    const power = readUInt16LE(9);              // ãƒ‘ãƒ¯ãƒ¼ (watts)\n    const totalEnergy = readUInt16LE(11);       // ç·æ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼ (kcal)\n    const energyPerHour = readUInt16LE(13);     // æ™‚é–“ã‚ãŸã‚Šæ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼ (kcal/hour)\n    const energyPerMinute = data[15];           // åˆ†ã‚ãŸã‚Šæ¶ˆè²»ã‚«ãƒ­ãƒªãƒ¼ (kcal/minute)\n    const elapsedTime = readUInt16LE(16);       // çµŒéæ™‚é–“ (seconds)\n\n    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º\n    node.status({ fill: \"green\", shape: \"dot\", text: \"ãƒ‡ãƒ¼ã‚¿å—ä¿¡ä¸­\" });\n\n    // è§£æçµæœã‚’è¿”ã™\n    return {\n        topic: 'ftmsData',\n        payload: {\n            speed: speed,\n            cadence: cadence,\n            distance: distance,\n            power: power,\n            totalEnergy: totalEnergy,\n            energyPerHour: energyPerHour,\n            energyPerMinute: energyPerMinute,\n            elapsedTime: elapsedTime\n        }\n    };\n}\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 220,
        "y": 360,
        "wires": [
            [
                "27142d08d5e78ff2"
            ]
        ]
    },
    {
        "id": "27142d08d5e78ff2",
        "type": "switch",
        "z": "5cf9b3d9818214c9",
        "name": "å›è»¢æ•°ã§åˆ†å²",
        "property": "payload.cadence",
        "propertyType": "msg",
        "rules": [
            {
                "t": "gt",
                "v": "55",
                "vt": "num"
            },
            {
                "t": "btwn",
                "v": "1",
                "vt": "num",
                "v2": "55",
                "v2t": "num"
            },
            {
                "t": "lt",
                "v": "1",
                "vt": "num"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 160,
        "y": 500,
        "wires": [
            [
                "18d0aae9a42eb03a"
            ],
            [
                "cd4a2356763338e5"
            ],
            [
                "3435ea82b0f823db"
            ]
        ]
    },
    {
        "id": "18d0aae9a42eb03a",
        "type": "function",
        "z": "5cf9b3d9818214c9",
        "name": "ãƒ€ãƒƒã‚·ãƒ¥ (>55rpm)",
        "func": "/**\n * ãƒ€ãƒƒã‚·ãƒ¥åˆ¶å¾¡\n * \n * ã€æ¡ä»¶ã€‘\n * cadence > 55 rpmï¼ˆé€Ÿãæ¼•ã„ã§ã„ã‚‹ï¼‰\n * \n * ã€å‹•ä½œã€‘\n * - Wã‚­ãƒ¼: æŠ¼ã™ï¼ˆå‰é€²ï¼‰\n * - Controlã‚­ãƒ¼: æŠ¼ã™ï¼ˆãƒ€ãƒƒã‚·ãƒ¥ï¼‰\n * â†’ Minecraftã§é«˜é€Ÿç§»å‹•\n * \n * ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºã€‘\n * 1ç§’é–“ã ã‘è¡¨ç¤ºã—ã¦è‡ªå‹•æ¶ˆå»ï¼ˆãƒã‚«ãƒã‚«åŠ¹æœï¼‰\n */\n\n// Wã‚­ãƒ¼ã‚’æŠ¼ã™ï¼ˆå‰é€²ï¼‰\nrobotjs.keyToggle('w', 'down');\n\n// Controlã‚­ãƒ¼ã‚’æŠ¼ã™ï¼ˆãƒ€ãƒƒã‚·ãƒ¥ï¼‰\nrobotjs.keyToggle('control', 'down');\n\n// ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºï¼ˆç·‘è‰²ã€ç¾åœ¨ã®cadenceè¡¨ç¤ºï¼‰\nnode.status({\n    fill: \"green\", \n    shape: \"dot\", \n    text: `ãƒ€ãƒƒã‚·ãƒ¥ ${msg.payload.cadence.toFixed(1)} rpm`\n});\n\n// 1ç§’å¾Œã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ¶ˆã™ï¼ˆãƒã‚«ãƒã‚«åŠ¹æœï¼‰\nsetTimeout(() => {\n    node.status({});\n}, 1000);\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "robotjs",
                "module": "robotjs"
            }
        ],
        "x": 410,
        "y": 440,
        "wires": [
            []
        ]
    },
    {
        "id": "cd4a2356763338e5",
        "type": "function",
        "z": "5cf9b3d9818214c9",
        "name": "é€šå¸¸å‰é€² (1-55rpm)",
        "func": "/**\n * é€šå¸¸å‰é€²åˆ¶å¾¡\n * \n * ã€æ¡ä»¶ã€‘\n * 1 rpm â‰¤ cadence â‰¤ 55 rpmï¼ˆæ™®é€šã«æ¼•ã„ã§ã„ã‚‹ï¼‰\n * \n * ã€å‹•ä½œã€‘\n * - Wã‚­ãƒ¼: æŠ¼ã™ï¼ˆå‰é€²ï¼‰\n * - Controlã‚­ãƒ¼: é›¢ã™ï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãªã—ï¼‰\n * â†’ Minecraftã§é€šå¸¸é€Ÿåº¦ç§»å‹•\n * \n * ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºã€‘\n * 1ç§’é–“ã ã‘è¡¨ç¤ºã—ã¦è‡ªå‹•æ¶ˆå»ï¼ˆãƒã‚«ãƒã‚«åŠ¹æœï¼‰\n */\n\n// Wã‚­ãƒ¼ã‚’æŠ¼ã™ï¼ˆå‰é€²ï¼‰\nrobotjs.keyToggle('w', 'down');\n\n// Controlã‚­ãƒ¼ã‚’é›¢ã™ï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãªã—ï¼‰\nrobotjs.keyToggle('control', 'up');\n\n// ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºï¼ˆé»„è‰²ã€ç¾åœ¨ã®cadenceè¡¨ç¤ºï¼‰\nnode.status({\n    fill: \"yellow\", \n    shape: \"dot\", \n    text: `å‰é€² ${msg.payload.cadence.toFixed(1)} rpm`\n});\n\n// 1ç§’å¾Œã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ¶ˆã™ï¼ˆãƒã‚«ãƒã‚«åŠ¹æœï¼‰\nsetTimeout(() => {\n    node.status({});\n}, 1000);\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "robotjs",
                "module": "robotjs"
            }
        ],
        "x": 420,
        "y": 500,
        "wires": [
            []
        ]
    },
    {
        "id": "3435ea82b0f823db",
        "type": "function",
        "z": "5cf9b3d9818214c9",
        "name": "è‡ªå‹•åœæ­¢ (<1rpm)",
        "func": "/**\n * è‡ªå‹•åœæ­¢ï¼ˆcadenceæ¤œçŸ¥ï¼‰\n * \n * ã€æ¡ä»¶ã€‘\n * cadence < 1 rpmï¼ˆã»ã¼åœæ­¢ï¼‰\n * \n * ã€å‹•ä½œã€‘\n * - Wã‚­ãƒ¼: é›¢ã™ï¼ˆå‰é€²åœæ­¢ï¼‰\n * - Controlã‚­ãƒ¼: é›¢ã™ï¼ˆãƒ€ãƒƒã‚·ãƒ¥åœæ­¢ï¼‰\n * â†’ Minecraftã§åœæ­¢\n * \n * ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºã€‘\n * 1ç§’é–“ã ã‘è¡¨ç¤ºã—ã¦è‡ªå‹•æ¶ˆå»\n */\n\n// Wã‚­ãƒ¼ã‚’é›¢ã™ï¼ˆå‰é€²åœæ­¢ï¼‰\nrobotjs.keyToggle('w', 'up');\n\n// Controlã‚­ãƒ¼ã‚’é›¢ã™ï¼ˆãƒ€ãƒƒã‚·ãƒ¥åœæ­¢ï¼‰\nrobotjs.keyToggle('control', 'up');\n\n// ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºï¼ˆã‚°ãƒ¬ãƒ¼ã€åœæ­¢è¡¨ç¤ºï¼‰\nnode.status({\n    fill: \"grey\", \n    shape: \"ring\", \n    text: \"åœæ­¢\"\n});\n\n// 1ç§’å¾Œã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ¶ˆã™\nsetTimeout(() => {\n    node.status({});\n}, 1000);\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "robotjs",
                "module": "robotjs"
            }
        ],
        "x": 410,
        "y": 560,
        "wires": [
            []
        ]
    },
    {
        "id": "pause_button",
        "type": "inject",
        "z": "5cf9b3d9818214c9",
        "name": "ä¸€æ™‚åœæ­¢",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 640,
        "y": 100,
        "wires": [
            [
                "pause_action"
            ]
        ]
    },
    {
        "id": "pause_action",
        "type": "function",
        "z": "5cf9b3d9818214c9",
        "name": "ä¸€æ™‚åœæ­¢å‡¦ç†",
        "func": "/**\n * ä¸€æ™‚åœæ­¢å‡¦ç†\n * \n * ã€å‹•ä½œã€‘\n * 1. å…¨ã¦ã®ã‚­ãƒ¼ã‚’é›¢ã™ï¼ˆå®‰å…¨ã®ãŸã‚ï¼‰\n * 2. flowå¤‰æ•° 'paused' ã‚’ true ã«è¨­å®š\n * 3. ä¸€æ™‚åœæ­¢ã‚²ãƒ¼ãƒˆãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç ´æ£„\n * \n * ã€ãƒ¡ãƒªãƒƒãƒˆã€‘\n * - BLEæ¥ç¶šã¯ç¶­æŒï¼ˆå†æ¥ç¶šä¸è¦ï¼‰\n * - ã‚­ãƒ¼ã¯ç¢ºå®Ÿã«é›¢ã‚Œã‚‹ï¼ˆå®‰å…¨ï¼‰\n * - å†é–‹ãŒé€Ÿã„\n */\n\n// å®‰å…¨ã®ãŸã‚ã€ã¾ãšã‚­ãƒ¼ã‚’é›¢ã™\nrobotjs.keyToggle('w', 'up');\nrobotjs.keyToggle('control', 'up');\n\n// ä¸€æ™‚åœæ­¢çŠ¶æ…‹ã«è¨­å®š\nflow.set('paused', true);\n\n// ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º\nnode.status({\n    fill: \"orange\", \n    shape: \"ring\", \n    text: \"ä¸€æ™‚åœæ­¢ä¸­\"\n});\n\n// ãƒ­ã‚°å‡ºåŠ›\nnode.warn('â¸ï¸ ä¸€æ™‚åœæ­¢ã—ã¾ã—ãŸ');\n\n// 3ç§’å¾Œã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ¶ˆã™\nsetTimeout(() => {\n    node.status({});\n}, 3000);\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "robotjs",
                "module": "robotjs"
            }
        ],
        "x": 810,
        "y": 100,
        "wires": [
            []
        ]
    },
    {
        "id": "resume_button",
        "type": "inject",
        "z": "5cf9b3d9818214c9",
        "name": "å†é–‹",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 640,
        "y": 140,
        "wires": [
            [
                "resume_action"
            ]
        ]
    },
    {
        "id": "resume_action",
        "type": "function",
        "z": "5cf9b3d9818214c9",
        "name": "å†é–‹å‡¦ç†",
        "func": "/**\n * å†é–‹å‡¦ç†\n * \n * ã€å‹•ä½œã€‘\n * flowå¤‰æ•° 'paused' ã‚’ false ã«è¨­å®š\n * â†’ ä¸€æ™‚åœæ­¢ã‚²ãƒ¼ãƒˆãŒãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€šã™ã‚ˆã†ã«ãªã‚‹\n * \n * ã€ãƒ¡ãƒªãƒƒãƒˆã€‘\n * - BLEæ¥ç¶šã¯ãã®ã¾ã¾ï¼ˆå†æ¥ç¶šä¸è¦ï¼‰\n * - å³åº§ã«å†é–‹ã§ãã‚‹\n */\n\n// é€šå¸¸å‹•ä½œçŠ¶æ…‹ã«è¨­å®š\nflow.set('paused', false);\n\n// ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º\nnode.status({\n    fill: \"green\", \n    shape: \"dot\", \n    text: \"å†é–‹ã—ã¾ã—ãŸ\"\n});\n\n// ãƒ­ã‚°å‡ºåŠ›\nnode.warn('â–¶ï¸ å†é–‹ã—ã¾ã—ãŸ');\n\n// 3ç§’å¾Œã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ¶ˆã™\nsetTimeout(() => {\n    node.status({});\n}, 3000);\n\nreturn msg;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 140,
        "wires": [
            []
        ]
    },
    {
        "id": "abc123def456stop",
        "type": "inject",
        "z": "5cf9b3d9818214c9",
        "name": "ç·Šæ€¥åœæ­¢",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "x": 640,
        "y": 180,
        "wires": [
            [
                "ghi789jkl012stop"
            ]
        ]
    },
    {
        "id": "ghi789jkl012stop",
        "type": "function",
        "z": "5cf9b3d9818214c9",
        "name": "ç·Šæ€¥åœæ­¢å‡¦ç†",
        "func": "/**\n * ç·Šæ€¥åœæ­¢å‡¦ç†\n * \n * ã€ä½¿ç”¨å ´é¢ã€‘\n * - ã‚­ãƒ¼ãŒæŠ¼ã—ã£ã±ãªã—ã«ãªã£ãŸæ™‚\n * - äºˆæœŸã›ã¬å‹•ä½œãŒç™ºç”Ÿã—ãŸæ™‚\n * - ã™ãã«åœæ­¢ã—ãŸã„æ™‚\n * \n * ã€å‹•ä½œã€‘\n * å…¨ã¦ã®ã‚­ãƒ¼ã‚’å¼·åˆ¶çš„ã«é›¢ã™\n * BLEæ¥ç¶šã¯ç¶­æŒã•ã‚Œã‚‹ï¼ˆå†é–‹ãŒé€Ÿã„ï¼‰\n * \n * ã€æ³¨æ„ã€‘\n * msgã‚’è¿”ã•ãªã„ã®ã§ã€å¾Œç¶šãƒãƒ¼ãƒ‰ã«ã¯æµã‚Œãªã„\n */\n\n// Wã‚­ãƒ¼ã‚’é›¢ã™ï¼ˆå‰é€²åœæ­¢ï¼‰\nrobotjs.keyToggle('w', 'up');\n\n// Controlã‚­ãƒ¼ã‚’é›¢ã™ï¼ˆãƒ€ãƒƒã‚·ãƒ¥åœæ­¢ï¼‰\nrobotjs.keyToggle('control', 'up');\n\n// ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºï¼ˆèµ¤è‰²ã€ç·Šæ€¥åœæ­¢ï¼‰\nnode.status({\n    fill: \"red\", \n    shape: \"ring\", \n    text: \"ç·Šæ€¥åœæ­¢\"\n});\n\n// ãƒ­ã‚°å‡ºåŠ›\nnode.warn('ğŸ›‘ ç·Šæ€¥åœæ­¢ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚Œã¾ã—ãŸ');\n\n// 1ç§’å¾Œã«ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ¶ˆã™\nsetTimeout(() => {\n    node.status({});\n}, 1000);\n\n// nullã‚’è¿”ã™ï¼ˆå¾Œç¶šãƒãƒ¼ãƒ‰ã«æµã•ãªã„ï¼‰\nreturn null;",
        "outputs": 1,
        "timeout": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [
            {
                "var": "robotjs",
                "module": "robotjs"
            }
        ],
        "x": 800,
        "y": 180,
        "wires": [
            []
        ]
    }
]
